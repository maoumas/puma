<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Teleprompter Auto-Play</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap');
        
        body { 
            background-color: black; 
            color: white; 
            font-family: 'Inter', sans-serif; 
            margin: 0; 
            overflow-x: hidden; 
        }

        #script-container { 
            padding: 20px; 
            padding-top: 40vh; 
            padding-bottom: 80vh; 
            max-width: 900px; 
            margin: 0 auto; 
            line-height: 1.6; 
        }

        .speaker-text { 
            font-size: 3rem; 
            font-weight: 600; 
            color: #ffffff; 
            margin-bottom: 2rem; 
            display: block;
        }

        .instruction { 
            font-size: 1.5rem; 
            color: #FCD34D; 
            font-style: italic; 
            background: #333; 
            padding: 15px; 
            border-left: 5px solid #F59E0B; 
            margin-bottom: 2rem; 
            border-radius: 4px;
        }

        .timestamp { 
            font-size: 2.2rem; 
            font-weight: 800; 
            color: #60A5FA; 
            border-top: 2px solid #444; 
            padding-top: 2rem; 
            margin-top: 4rem; 
            margin-bottom: 2rem;
            text-transform: uppercase; 
            letter-spacing: 1px;
        }

        /* Indicador visual de que el audio se va a reproducir */
        .audio-wrapper {
            margin: 2rem 0;
            padding: 1rem;
            background: #1f2937;
            border: 1px solid #374151;
            border-radius: 10px;
            text-align: center;
            transition: all 0.5s;
        }

        .audio-wrapper.playing {
            border-color: #10B981;
            background: #064E3B;
            box-shadow: 0 0 20px rgba(16, 185, 129, 0.3);
        }

        .audio-label {
            display: block;
            font-size: 1.2rem;
            color: #9CA3AF;
            margin-bottom: 0.5rem;
            font-weight: bold;
        }

        audio {
            width: 100%;
            height: 40px;
        }

        #controls { 
            position: fixed; 
            bottom: 0; 
            left: 0; 
            right: 0; 
            background-color: #111; 
            border-top: 1px solid #333; 
            padding: 15px; 
            display: flex; 
            align-items: center; 
            gap: 10px; 
            z-index: 9999; 
            justify-content: center; 
            flex-wrap: wrap;
        }

        .btn-main { 
            height: 50px; 
            padding: 0 25px; 
            border-radius: 8px; 
            font-weight: 700; 
            border: none; 
            color: white; 
            cursor: pointer; 
            font-size: 1rem;
            transition: background 0.2s;
        }

        #play-pause-btn { background-color: #10B981; min-width: 120px; } 
        #play-pause-btn.paused { background-color: #EF4444; } 
        #reset-btn { background-color: #374151; }

        .control-group { 
            display: flex; 
            align-items: center; 
            background: #222; 
            padding: 4px; 
            border-radius: 8px; 
            border: 1px solid #444; 
        }

        .stepper-btn { 
            width: 40px; 
            height: 40px; 
            border-radius: 6px; 
            border: none; 
            font-weight: bold; 
            cursor: pointer; 
            color: white; 
            font-size: 1.2rem;
        }
        
        .theme-speed .stepper-btn { background: #1E40AF; }
        .theme-font .stepper-btn { background: #92400E; }
        
        .value-display { font-family: monospace; font-weight: bold; min-width: 40px; text-align: center; font-size: 1.1rem; }

        @media (max-width: 600px) {
            .speaker-text { font-size: 2rem; }
            #controls { padding: 10px; }
            .btn-main { height: 40px; padding: 0 15px; font-size: 0.9rem; }
            .stepper-btn { width: 35px; height: 35px; }
        }
    </style>
</head>
<body>

<div id="script-container">
    <div class="instruction">
        NOTA: Al pulsar START, los audios se prepararÃ¡n automÃ¡ticamente. AsegÃºrate de tener el volumen encendido.
    </div>

    <h2 class="timestamp">THE SONIC LOBOTOMY</h2>
    
    <p class="instruction">[SCENE START]</p>
    <p class="instruction">[VIDEO STARTS PLAYING THE "MODERN POP/REGGAETON" TRACK GENERATED BY SUNO]</p>

    <div class="audio-wrapper" data-played="false">
        <span class="audio-label">ðŸŽµ Track: Modern Pop / Reggaeton Loop</span>
        <audio src="involution.mp3" preload="auto" controls></audio>
    </div>

    <p class="instruction">[LOUD, REPETITIVE BEAT PLAYS]</p>

    <div class="speaker-text">Stop! Stop it immediately!</div>

    <p class="instruction">[MUSIC CUTS TO ABRUPT SILENCE]</p>

    <div class="speaker-text">Are you trying to kill them?</div>
    <div class="speaker-text">Apologies, ladies and gentlemen. That was a test.</div>
    <div class="speaker-text">If you had listened to that loop for thirty more seconds, your prefrontal cortex would have begun to dissolve into a warm, sugary sludge. We call that "modern culture."</div>
    <div class="speaker-text">Welcome to the history of your own cognitive decline.</div>

    <h2 class="timestamp">BLOCK 1: THE MATHEMATICAL SOUL</h2>

    <div class="speaker-text">Letâ€™s go back. Way back. Before autotune.</div>
    <div class="speaker-text">Let's go to Mesopotamia, 3,400 years ago.</div>

    <div class="audio-wrapper" data-played="false">
        <span class="audio-label">ðŸŽµ Track: The Divine Origin (Sumerian)</span>
        <audio src="sumerian.mp3" preload="auto" controls></audio>
    </div>

    <p class="instruction">[VISUALS: CUNEIFORM TABLETS]</p>

    <div class="speaker-text">You hear that? That isn't entertainment. That is data.</div>
    <div class="speaker-text">The Sumerians used it to align their souls with the cosmos.</div>
    <div class="speaker-text">Pythagoras discovered that beauty wasn't an opinion. It was a ratio.</div>

    <h2 class="timestamp">BLOCK 2: THE COSMIC MOTET</h2>

    <div class="speaker-text">Now, let's fast forward to the 17th Century. Johannes Kepler.</div>

    <div class="audio-wrapper" data-played="false">
        <span class="audio-label">ðŸŽµ Track: Cosmic Polyphony (Kepler)</span>
        <audio src="kepler.mp3" preload="auto" controls></audio>
    </div>

    <p class="instruction">[VISUALS: KEPLERâ€™S MODELS]</p>

    <div class="speaker-text">Kepler believed the universe was a six-voice polyphonic motet.</div>
    <div class="speaker-text">He calculated the notes for each planet.</div>

    <h2 class="timestamp">BLOCK 3: THE ARCHITECTURE OF GOD</h2>

    <div class="audio-wrapper" data-played="false">
        <span class="audio-label">ðŸŽµ Track: The Baroque Peak (Bach Style)</span>
        <audio src="bach.mp3" preload="auto" controls></audio>
    </div>

    <p class="instruction">[VISUALS: FRACTALS, CATHEDRALS]</p>

    <div class="speaker-text">This. This is the pinnacle. The Baroque.</div>
    <div class="speaker-text">Composers like J.S. Bach wrote music to structure the human mind.</div>
    <div class="speaker-text">Listen to that tempo. It is approximately 60 beats per minute. Just like a relaxed human heart.</div>

    <h2 class="timestamp">BLOCK 4: THE GREAT COLLAPSE</h2>

    <div class="speaker-text">So, what happened?</div>
    <div class="speaker-text">We invented the industry.</div>

    <div class="audio-wrapper" data-played="false">
        <span class="audio-label">ðŸŽµ Track: The Involution (Modern Pop Loop)</span>
        <audio src="pop_loop.mp3" preload="auto" controls></audio>
    </div>

    <p class="instruction">[VISUALS: TIKTOK SCROLLING]</p>

    <div class="speaker-text">Welcome to the present. The era of the "Loudness War."</div>
    <div class="speaker-text">We traded the orchestra for the loop.</div>
    <div class="speaker-text">It is not art. It is auditory sugar.</div>

    <h2 class="timestamp">CONCLUSION: THE SILENCE</h2>

    <p class="instruction">[CUT MUSIC ABRUPTLY]</p>

    <div class="speaker-text">And here is the tragedy.</div>
    <div class="speaker-text">If you cannot process a complex harmony, you probably cannot process a complex idea.</div>
    <div class="speaker-text">Reclaim your brain before the algorithm composts it.</div>

    <p class="instruction">[FADE TO BLACK]</p>
</div>

<div id="controls">
    <button id="play-pause-btn" class="btn-main">START</button>
    <button id="reset-btn" class="btn-main" title="Reiniciar">â†º</button>
    <div class="control-group theme-speed"><button class="stepper-btn" id="s-">-</button><div class="value-display" id="s-val">Speed: 3</div><button class="stepper-btn" id="s+">+</button></div>
    <div class="control-group theme-font"><button class="stepper-btn" id="f-">-</button><div class="value-display" id="f-val">Font: 3</div><button class="stepper-btn" id="f+">+</button></div>
</div>

<script>
    let state = { speed: 3, font: 3, playing: false, unlocked: false };
    let scrollInterval;
    const audios = document.querySelectorAll('audio');

    // 1. FUNCIÃ“N DE AUTO-PLAY
    function checkAutoPlay() {
        const triggerPoint = window.innerHeight * 0.35; // Punto de disparo (35% de la pantalla)
        
        audios.forEach(audio => {
            const wrapper = audio.closest('.audio-wrapper');
            const rect = wrapper.getBoundingClientRect();

            // Si el audio entra en la zona de lectura y NO se ha reproducido aÃºn
            if (rect.top < triggerPoint && rect.bottom > 0 && wrapper.dataset.played === "false") {
                console.log("Auto-playing:", audio.src);
                
                // Pausar otros audios si estÃ¡n sonando
                audios.forEach(a => { if(a !== audio) a.pause(); });
                
                // Reproducir el actual
                audio.play().then(() => {
                    wrapper.classList.add('playing');
                    wrapper.dataset.played = "true"; // Marcar como reproducido
                }).catch(e => console.log("Bloqueo de navegador:", e));
            }
        });
    }

    // 2. UNLOCK PARA IPHONE (Truco esencial)
    function unlockAudioContext() {
        if (state.unlocked) return;
        audios.forEach(audio => {
            audio.play().then(() => {
                audio.pause();
                audio.currentTime = 0;
            }).catch(() => {});
        });
        state.unlocked = true;
    }

    // 3. LOGICA PRINCIPAL
    function updateUI() {
        document.getElementById('s-val').innerText = 'Speed: ' + state.speed;
        document.getElementById('f-val').innerText = 'Font: ' + state.font;
        const fs = 24 + (state.font * 4);
        document.querySelectorAll('.speaker-text').forEach(e => e.style.fontSize = fs + 'px');
    }

    function scrollLoop() {
        if (!state.playing) return;
        window.scrollBy(0, state.speed * 0.5);
        checkAutoPlay(); // Chequear audios en cada paso del scroll
        scrollInterval = requestAnimationFrame(scrollLoop);
    }

    function togglePlay() {
        // Desbloquear audio la primera vez que se pulsa START
        if (!state.unlocked) unlockAudioContext();

        state.playing = !state.playing;
        const btn = document.getElementById('play-pause-btn');
        
        if (state.playing) {
            btn.innerText = "PAUSE";
            btn.classList.add('paused');
            scrollLoop();
        } else {
            btn.innerText = "START";
            btn.classList.remove('paused');
            cancelAnimationFrame(scrollInterval);
            // Opcional: Pausar audios al pausar scroll
            audios.forEach(a => a.pause());
        }
    }

    // Event Listeners
    document.getElementById('play-pause-btn').onclick = (e) => { e.stopPropagation(); togglePlay(); };
    
    document.getElementById('reset-btn').onclick = (e) => { 
        e.stopPropagation(); 
        window.scrollTo(0, 0); 
        state.playing = false; 
        cancelAnimationFrame(scrollInterval); 
        audios.forEach(a => { 
            a.pause(); 
            a.currentTime = 0; 
            a.closest('.audio-wrapper').dataset.played = "false"; 
            a.closest('.audio-wrapper').classList.remove('playing');
        });
        const btn = document.getElementById('play-pause-btn');
        btn.innerText = "START";
        btn.classList.remove('paused');
    };

    document.getElementById('s-').onclick = () => { if(state.speed > 1) state.speed--; updateUI(); };
    document.getElementById('s+').onclick = () => { if(state.speed < 20) state.speed++; updateUI(); };
    document.getElementById('f-').onclick = () => { if(state.font > 1) state.font--; updateUI(); };
    document.getElementById('f+').onclick = () => { if(state.font < 15) state.font++; updateUI(); };

    document.body.onclick = (e) => {
        if (!e.target.closest('#controls') && !e.target.closest('audio')) {
            togglePlay();
        }
    };

    updateUI();
</script>

</body>
</html>
